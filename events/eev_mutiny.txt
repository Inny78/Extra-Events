# Mutiny
namespace = eev_mutiny

ship_event = {
	id = eev_mutiny.1
	title = eev_mutiny.1.name
	desc = eev_mutiny.1.desc
	picture = GFX_evt_satellite_in_orbit
	show_sound = event_ship_bridge
	location = root

	is_triggered_only = yes

	immediate = {
		fleet = { set_event_locked = yes }
	}

	option = {
		name = eev_mutiny.1.a
		trigger = { is_authoritarian = no }
		ship_event = { id = eev_mutiny.2 days = 10 }
	}
	option = {
		name = eev_mutiny.1.b
		trigger = { is_militarist = no }
		ship_event = { id = eev_mutiny.3 days = 30 }
	}
	option = {
		name = eev_mutiny.1.c
		trigger = { is_pacifist = no }
		custom_tooltip = "eev_mutiny.2.tooltip"
		fleet = { set_event_locked = no }
        kill_leader = { class = scientist show_notification = yes }
		fleet = { destroy_fleet = this }
	}
	option = {
		name = eev_mutiny.1.d
		hidden_effect = { save_global_event_target_as = eev_mutiny_ship }
		enable_special_project = {
			name = EEV_MUTINY_RESCUE
			location = root
			owner = root.owner
		}
	}
}

ship_event = {
	id = eev_mutiny.2
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		random_list = {
			50 = { ship_event = { id = eev_mutiny.4 } }
			50 = { ship_event = { id = eev_mutiny.6 } }
		}
	}
}

ship_event = {
	id = eev_mutiny.3
	title = eev_mutiny.3.name
	desc = eev_mutiny.3.desc
	picture = GFX_evt_face_off_in_space
	show_sound = event_ship_bridge
	location = root

	is_triggered_only = yes

	immediate = {
        kill_leader = { class = scientist show_notification = yes }
	}

	option = {
		name = CURSES
	}
	after = {
		if = {
			limit = { exists = event_target:eev_mutiny_ship }
			clear_global_event_target = eev_mutiny_ship
		}
	}
}

ship_event = {
	id = eev_mutiny.4
	title = eev_mutiny.3.name
	desc = eev_mutiny.4.desc
	picture = GFX_evt_ship_in_orbit
	show_sound = event_faceoff_in_space
	is_triggered_only = yes

	option = {
		name = CURSES
        kill_leader = { class = scientist show_notification = yes }
		hidden_effect = {
			fleet = {
				set_event_locked = no
				destroy_fleet = this
			}
		}
	}
}

ship_event = {
	id = eev_mutiny.5
	title = eev_mutiny.5.name
	desc = eev_mutiny.5.desc
	picture = GFX_evt_ship_in_orbit
	show_sound = event_faceoff_in_space
	is_triggered_only = yes

	option = {
		name = eev_mutiny.5.a
	}
	after = {
		clear_global_event_target = eev_mutiny_ship
	}
}

ship_event = {
	id = eev_mutiny.6
	title = eev_mutiny.5.name
	desc = eev_mutiny.6.desc
	picture = GFX_evt_ship_in_orbit
	show_sound = event_faceoff_in_space
	is_triggered_only = yes

	option = {
		name = eev_mutiny.5.a
		owner = {
			add_resource = { energy = 500 }
		}
		hidden_effect = {
			fleet = { set_event_locked = no }
		}
	}
}
